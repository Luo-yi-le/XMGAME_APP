(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/play/play"],{"1ebc":function(e,t,o){"use strict";var i=o("c799"),n=o.n(i);n.a},"4a72":function(e,t,o){"use strict";o.r(t);var i=o("774c"),n=o.n(i);for(var s in i)"default"!==s&&function(e){o.d(t,e,function(){return i[e]})}(s);t["default"]=n.a},"72da":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"play_view"},[o("view",{staticClass:"zhu"},[o("view",{staticClass:"play_view1"},[e._v(e._s(e.TopIndex+1)+" / "+e._s(e.getTopicList.length))]),e._m(0),o("view",[o("image",{staticClass:"play_img",attrs:{src:"../../static/img/body.png"}}),o("view",{staticStyle:{}},[e._v("积分:"+e._s(e.userInfo.Integral))])])]),o("view",{staticClass:"play_view4"},[o("view",[e._v("题目类型")]),o("view",[o("view",{staticClass:"play_view5"},[e._v(e._s(e.getTopicList[e.TopIndex].GenreName))])]),o("view",{staticClass:"play_view6"},[o("label",{staticClass:"play_view7"},[e._v(e._s(e.count))])],1),o("view",{staticClass:"play_view8"},[o("view",[e._v("问题：")]),o("view",{staticClass:"play_view9"},[e._v(e._s(e.getTopicList[e.TopIndex].Topic)+"=？")])]),o("view",{staticClass:"play_view10"},[o("view",[e._v("答案：")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"answer"}],staticStyle:{"border-bottom":"10rpx"},attrs:{type:"text",placeholder:"输入答案",eventid:"5c77e440-0"},domProps:{value:e.answer},on:{input:function(t){t.target.composing||(e.answer=t.target.value)}}})]),o("button",{staticClass:"bb1",style:{display:e.forbid},attrs:{eventid:"5c77e440-1"},on:{click:e.isRight}},[e._v("下一题")]),o("button",{staticStyle:{margin:"50rpx"},attrs:{eventid:"5c77e440-2"},on:{click:e.over}},[e._v("结束游戏")])],1)])},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"play_view2"},[o("text",{staticClass:"play_text"},[e._v("玩家")])])}];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return n})},"774c":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=s(o("13f5"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};i.get||i.set?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,t}var a={data:function(){return{bingo:0,TopIndex:0,integral:0,count:10,userInfo:"",forbid:"",getTopicList:[],token:"",roomId:"",answer:"",RecordList:""}},onLoad:function(e){var t=this;this.roomId=e.roomID,this.token=e.token,console.log(this.roomId),this.timer=setInterval(function(){t.count=t.count-1,0==t.count&&(t.getTopicList.length-1==t.TopIndex?(t.forbid="none",clearInterval(t.timer)):(t.TopIndex=t.TopIndex+1,t.count=10))},1e3)},methods:{over:function(t){this.getTopicList[this.TopIndex].Answer==this.answer&&(this.count>0?(console.log("答对了"),this.bingo=this.bingo+1,this.integral=this.integral+2,console.log("积分:"+this.integral)):console.log("超时了！")),e.redirectTo({url:"../over/over?roomId="+this.roomId+"&token="+this.token+"&bingo="+this.bingo})},selectUserInfo:function(){var e=this,t=localStorage.getItem("userInfo");e.userInfo=JSON.parse(t)},isRight:function(){var e=this.getTopicList[this.TopIndex].ID,t={AccountName:this.token,QuestionID:e,Reply:this.answer,RecordID:n.RecordList.ID},o=JSON.stringify(t),i={Message:o,Tag:"ac",ActionMethod:"RecordQuestionBLL.IsRight"};console.log(JSON.stringify(i)),this.websocketsend(i),this.answer="",this.TopIndex=this.TopIndex+1,this.count=10,this.getTopicList.length-1==this.TopIndex&&(this.forbid="none")},getGameRoomID:function(){var e=localStorage.getItem("game");this.game=JSON.parse(e)},initWebSocket:function(){i=new WebSocket(n.wsuri),i.onopen=this.webSocketClientOnopen,i.onmessage=this.webSocketClientOnmessage,i.onerror=this.webSocketClientOnerror,i.onclose=this.webSocketClientOnclose},webSocketClientOnopen:function(){console.log("打开成功");var e={Tag:"ac",ActionMethod:"QuestionBLL.GetQuestions"};this.websocketsend(e)},webSocketClientOnmessage:function(e){var t=JSON.parse(e.data),o="string"==typeof t?JSON.parse(t):t;if("QuestionBLL.GetQuestions"==o.ActionMethod){var i=JSON.parse(t.Message);console.log(i.Data),200==i.Code&&(this.getTopicList=i.Data)}else if("RecordQuestionBLL.IsRight"==o.ActionMethod){var n=JSON.parse(o.Message);console.log("模拟答题："+JSON.stringify(n));var s=n;200===s.Code&&(this.Answer=s.Data,console.log("模拟答题:"+this.Answer))}},websocketsend:function(e){console.log("数据发送："+JSON.stringify(e)),i.send(JSON.stringify(e))},webSocketClientOnerror:function(e){this.initWebSocket(),console.log("websock连接错误,重新连接",e)},webSocketClientOnclose:function(e){console.log("websock连接关闭",e)}},created:function(){this.getGameRoomID(),this.initWebSocket(),this.selectUserInfo(),console.log("api:"+n.RecordList)}};t.default=a}).call(this,o("6e42")["default"])},9275:function(e,t,o){"use strict";o("7f50");var i=s(o("b0ce")),n=s(o("d6b5"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(n.default))},c799:function(e,t,o){},d6b5:function(e,t,o){"use strict";o.r(t);var i=o("72da"),n=o("4a72");for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);o("1ebc");var a=o("2877"),r=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports}},[["9275","common/runtime","common/vendor"]]]);