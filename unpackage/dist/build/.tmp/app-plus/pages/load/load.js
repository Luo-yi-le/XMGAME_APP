(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/load/load"],{"0d8a":function(e,t,s){"use strict";s.r(t);var o=s("a71e"),n=s("caf5");for(var a in n)"default"!==a&&function(e){s.d(t,e,function(){return n[e]})}(a);s("f595");var i=s("2877"),r=Object(i["a"])(n["default"],o["a"],o["b"],!1,null,null,null);t["default"]=r.exports},"40d3":function(e,t,s){"use strict";s("7f50");var o=a(s("b0ce")),n=a(s("0d8a"));function a(e){return e&&e.__esModule?e:{default:e}}Page((0,o.default)(n.default))},a71e:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"Parentlevel"},[e._m(0),s("view",{staticClass:"Waitfor"},[e._v("等待对手加入...")]),s("view",{staticClass:"Option"},[e._m(1),s("view",{staticClass:"userInfo"},[s("view",{staticClass:"user"},[s("view",{staticClass:"userName"},[e._v("用户名:"),s("text",[e._v(e._s(e.user.AccountName))])]),s("view",{staticClass:"userIntegral"},[e._v("积分:"),s("text",[e._v(e._s(e.user.Integral))])])])])]),s("button",{staticClass:"load_but",attrs:{eventid:"d70365c0-0"},on:{click:e.preGames}},[e._v("准备游戏")]),s("button",{staticClass:"load_but",attrs:{eventid:"d70365c0-1"},on:{click:e.onover}},[e._v("取消游戏")])],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"Headportrait"},[s("image",{staticClass:"load_view",attrs:{src:"../../static/img/ut2.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"P_hostile"},[s("view",[s("view",{staticClass:"P_GameplayerA"})]),s("view",{staticClass:"P_GameplayerVS"},[s("span",{staticClass:"P_span"},[e._v("VS")])]),s("view",{staticClass:"P_GameplayerB"},[s("span",{staticClass:"P_Gsapn"},[e._v("?")])])])}];s.d(t,"a",function(){return o}),s.d(t,"b",function(){return n})},caf5:function(e,t,s){"use strict";s.r(t);var o=s("cd2f"),n=s.n(o);for(var a in o)"default"!==a&&function(e){s.d(t,e,function(){return o[e]})}(a);t["default"]=n.a},cd2f:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=a(s("13f5"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};o.get||o.set?Object.defineProperty(t,s,o):t[s]=e[s]}return t.default=e,t}var i={data:function(){return{token:"",roomID:"",user:"",game:"",createTime:"",recordEndTime:"",n_integral:-20,RecordList:""}},methods:{onover:function(t){e.switchTab({url:"../index/index"})},webSocketClientOnmessage:function(t){var s=JSON.parse(t.data);if(console.log("数据："+JSON.stringify(s)),"r"==s.Tag)e.showToast({title:s.Message+": "+s.RoomID,duration:2e3});else if("i"==s.Tag)this.roomID=s.RoomID;else if("b"==s.Tag){var o={AccountName:this.token,Integral:this.n_integral,CreateTime:this.createTime,EndTime:this.recordEndTime,RoomID:this.game.RoomID},a=JSON.stringify(o);console.log(a);var i={Message:a,Tag:"ac",ActionMethod:"RecordBLL.AddRecord"};this.websocketsend(i)}else if("ac"==s.Tag&&"RecordBLL.AddRecord"==s.ActionMethod){var r=JSON.parse(s.Message);200==r.Code&&(n.RecordList=r.Data,e.reLaunch({url:"../play/play?token="+this.token+"&roomID="+s.RoomID}))}localStorage.setItem("game",JSON.stringify(s))},initWebSocket:function(){o=new WebSocket(n.wsuri),o.onopen=this.webSocketClientOnopen,o.onmessage=this.webSocketClientOnmessage,o.onerror=this.webSocketClientOnerror,o.onclose=this.webSocketClientOnclose},webSocketClientOnopen:function(e){var t={FromUser:this.token,Tag:"c"};this.websocketsend(t);var s={FromUser:this.token,Tag:"i",RoomID:""==this.roomID?"":this.roomID};this.websocketsend(s)},websocketsend:function(e){o.send(JSON.stringify(e))},webSocketClientOnclose:function(e){console.log("关闭")},webSocketClientOnerror:function(){this.initWebSocket()},showUser:function(){var t=localStorage.getItem("game");this.game=JSON.parse(t),console.log(this.game.FromUser),e.showToast({title:this.game.Message+": "+this.game.RoomID,duration:3e3})},preGames:function(){localStorage.getItem("game");var e={FromUser:this.token,Tag:"r",RoomID:this.game.RoomID};this.websocketsend(e)},selectUserInfo:function(){var e=this;e.user=JSON.parse(localStorage.getItem("userInfo"))},getSystemTime:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getHours()<10?"0"+e.getHours():e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),r=t+"-"+s+"-"+o+" "+n+":"+a+":"+i,c=t+"-"+s+"-"+o+" "+n+":"+a+":"+(i+parseInt(10));return this.recordEndTime=c,this.createTime=r,this.createTime}},onLoad:function(e){this.token=e.token,console.log(this.token)},created:function(){var e=this;this.selectUserInfo(),this.getSystemTime(),setTimeout(function(){e.showUser()},500),this.initWebSocket()}};t.default=i}).call(this,s("6e42")["default"])},f595:function(e,t,s){"use strict";var o=s("fe51"),n=s.n(o);n.a},fe51:function(e,t,s){}},[["40d3","common/runtime","common/vendor"]]]);